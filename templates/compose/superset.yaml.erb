version: '3.6'

services:
  superset:
    image: "<%= @utils['images']['superset'] %>"
    restart: always
    volumes:
      - superset_db:/var/lib/superset
    labels:
      traefik.enable: true
      traefik.frontend.rule: "Host:superset.<%= @config['app']['domain'] %>"
      traefik.port: 8088

volumes:
  superset_db:
    driver_opts:
      type: none
      device: "<%= @config['app']['docker_volumes_path'] %>/superset_db"
      o: bind