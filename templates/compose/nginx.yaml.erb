version: '3.6'

services:
  nginx:
    image: nginx:1.17.10-alpine
    ports:
      - "<%= @config['nginx']['hostport'] %>:80"
    volumes:
    - nginx_data:/app
    - ../config/nginx/default.conf:/etc/nginx/conf.d/default.conf 
    restart: always

volumes:
  nginx_data:
    driver_opts:
      type: none
      device: "<%= @config['app']['docker_volumes_path'] %>/nginx_data"
      o: bind
