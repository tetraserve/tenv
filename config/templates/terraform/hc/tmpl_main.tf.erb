################ Backend & Providers

terraform {
  backend "gcs" {
    credentials = "<%= @deploy['gcs']['credentials'] %>"
    bucket  = "<%= @deploy['gcs']['terraform_bucket'] %>"
    prefix = "hc/<%= @config['mode'] %>"
  }
}
provider "hcloud" {
  version = "~> 1.16"
  token = file(var.hcloud_token)
}

data "hcloud_ssh_key" "opendax" {
  fingerprint = file(var.hcloud_ssh_fingerprint)
}

provider "cloudflare" {
  version = "~> 2.0"
  api_token  = file(var.cloudflare_token)
}

provider "sakuracloud" {
  version = "~> 2.3"
  token  = file(var.sakuracloud_token)
  secret = file(var.sakuracloud_secret)
  zone   = var.sakuracloud_zone
}
